!function(){"use strict";const t=new Map,e=document.getElementById("task-form"),s=document.getElementById("task-input"),a=document.getElementById("tasks-list"),n=document.getElementById("completed-tasks-list"),i=document.getElementById("deleted-tasks-list");function l(t){t.style.height="40px",t.scrollHeight>t.offsetHeight&&(t.style.height="auto",t.style.height=`${t.scrollHeight}px`)}function d(e){const s=e.target.closest("li.tasks-list__item"),l=e.target.closest("button");if(!s||!l)return;const d=t.get(s);switch(l.getAttribute("data-type")){case"edit":!function(t,e){o(e)}(0,d);break;case"complete":!function(t,e){t.classList.add("--wrapped"),t.addEventListener("animationend",(s=>{n.append(t),t.classList.remove("--wrapped"),t.classList.add("--expanded"),e.taskEditButton.style.display="none",e.taskCompleteButton.style.display="none",e.taskRecoverButton.style.display="flex"}),{once:!0})}(s,d);break;case"recover":!function(t,e){t.classList.add("--wrapped"),t.addEventListener("animationend",(s=>{a.append(t),t.classList.remove("--wrapped"),t.classList.add("--expanded"),e.taskEditButton.style.display="flex",e.taskCompleteButton.style.display="flex",e.taskRecoverButton.style.display="none"}),{once:!0})}(s,d);break;case"delete":!function(t,e){"deleted-tasks-list"!==t.closest("ul").id&&(t.classList.add("--wrapped"),t.addEventListener("animationend",(s=>{i.append(t),t.classList.remove("--wrapped"),t.classList.add("--expanded"),e.taskEditButton.style.display="none",e.taskCompleteButton.style.display="none",e.taskRecoverButton.style.display="flex"}),{once:!0}))}(s,d)}}function o(t){const e=t.taskEditButton.querySelector("img");"Редактировать"===e.alt?(e.src="img/icons/save.svg",e.alt="Сохранить",t.taskText.removeAttribute("disabled"),t.taskText.style.resize="vertical",t.taskText.focus(),t.taskText.selectionStart=t.taskText.value.length,t.taskDeleteButton.setAttribute("disabled",""),t.taskCompleteButton.setAttribute("disabled",""),t.taskRecoverButton.setAttribute("disabled","")):(e.src="img/icons/edit.svg",e.alt="Редактировать",t.taskText.setAttribute("disabled",""),t.taskText.style.resize="none",t.taskDeleteButton.removeAttribute("disabled"),t.taskCompleteButton.removeAttribute("disabled"),t.taskRecoverButton.removeAttribute("disabled"))}e.addEventListener("submit",(n=>{n.preventDefault();const i=function(e){const s=document.createElement("li"),a=document.createElement("div"),n=document.createElement("textarea"),i=document.createElement("button"),c=document.createElement("button"),r=document.createElement("button"),u=document.createElement("button");return s.classList.add("tasks-list__item"),a.classList.add("tasks-list__item-wrapper"),n.classList.add("tasks-list__item-text","interactive-element"),n.setAttribute("disabled",""),n.innerText=e,n.style.resize="none",i.classList.add("tasks-list__item-button","tasks-list__edit-button","interactive-element"),c.classList.add("tasks-list__item-button","tasks-list__complete-button","interactive-element"),r.classList.add("tasks-list__item-button","tasks-list__recover-button","interactive-element"),u.classList.add("tasks-list__item-button","tasks-list__delete-button","interactive-element"),i.type="button",c.type="button",r.type="button",u.type="button",i.setAttribute("data-type","edit"),c.setAttribute("data-type","complete"),r.setAttribute("data-type","recover"),u.setAttribute("data-type","delete"),i.innerHTML='<img src="img/icons/edit.svg" alt="Редактировать" class="tasks-list__item-button-img">',c.innerHTML='<img src="img/icons/complete.svg" alt="Выполнить" class="tasks-list__item-button-img">',r.innerHTML='<img src="img/icons/recover.svg" alt="Вернуть в список задач" class="tasks-list__item-button-img">',u.innerHTML='<img src="img/icons/delete.svg" alt="Удалить" class="tasks-list__item-button-img">',r.style.display="none",s.append(a),a.append(n,i,r,c,u),s.addEventListener("click",d),n.addEventListener("keydown",(t=>{t.shiftKey||"Enter"!==t.key?t.shiftKey&&"Enter"===t.key&&l(t.currentTarget):o(i.querySelector("img"))})),n.addEventListener("input",(t=>l())),t.set(s,{taskWrapper:a,taskText:n,taskEditButton:i,taskRecoverButton:r,taskCompleteButton:c,taskDeleteButton:u}),s}(s.value);e.reset(),a.append(i),i.classList.add("--expanded"),l(t.get(i).taskText)}))}();